<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en"><title type="text">Adrian Lin</title><subtitle type="html">Adrian Lin's blogs.</subtitle><updated>2023-02-26T10:55:20+00:00</updated><id>https://adrian-lin-1-0-0.github.io/</id><link rel="alternate" type="text/html" href="https://adrian-lin-1-0-0.github.io/"/><link rel="self" type="application/atom+xml" href="https://adrian-lin-1-0-0.github.io/atom.xml"/><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en)</rights><generator uri="https://gohugo.io/" version="0.110.0">Hugo</generator><entry><title type="text">Go Webassembly</title><link rel="alternate" type="text/html" href="https://adrian-lin-1-0-0.github.io/posts/2023-02-26-go-webassembly/"/><id>https://adrian-lin-1-0-0.github.io/posts/2023-02-26-go-webassembly/</id><updated>2023-02-26T10:55:16+00:00</updated><published>2023-02-26T18:19:24+08:00</published><author><uri>https://adrian-lin-1-0-0.github.io/</uri></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en)</rights><summary type="html">程式碼
Server and Client 直接寫code吧
當使用js/wasm架構時,syscall/js可以訪問WebAssembly環境.它的API基於JavaScript.
因為在瀏覽器上不能直接使用TCP或UDP,所以這裡使用websocket.
client/client.go
1 2 3 4 5 6 7 8 9 10 11 package main import ( &amp;#34;syscall/js&amp;#34; ) func main() { js.Global().Get(&amp;#34;WebSocket&amp;#34;).New(&amp;#34;ws://localhost:8080/echo&amp;#34;) } server 端就直接使用TCP了(大家都是tcp,不要分那麼細)
server/server.go
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 package main import ( &amp;#34;net&amp;#34; ) func main() { println(&amp;#34;Starting TCP server.</summary><content type="html">&lt;style>
.lntable{
max-height: 99em;
}
&lt;/style>
&lt;p>&lt;a href="https://github.com/adrian-lin-1-0-0/go-webassembly-demo">程式碼&lt;/a>&lt;/p>
&lt;h2 id="server-and-client">Server and Client&lt;/h2>
&lt;ol>
&lt;li>
&lt;p>直接寫code吧&lt;/p>
&lt;p>當使用&lt;code>js/wasm&lt;/code>架構時,&lt;code>syscall/js&lt;/code>可以訪問&lt;code>WebAssembly&lt;/code>環境.它的API基於JavaScript.&lt;br>&lt;/p>
&lt;p>因為在瀏覽器上不能直接使用&lt;code>TCP&lt;/code>或&lt;code>UDP&lt;/code>,所以這裡使用&lt;code>websocket&lt;/code>.&lt;br>&lt;/p>
&lt;p>client/client.go&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;syscall/js&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">js&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Global&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;WebSocket&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ws://localhost:8080/echo&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>server 端就直接使用&lt;code>TCP&lt;/code>了(大家都是tcp,不要分那麼細)&lt;/p>
&lt;p>server/server.go&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;net&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Starting TCP server...&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">listener&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">net&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Listen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;tcp&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;:8080&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Error starting TCP server:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">defer&lt;/span> &lt;span class="nx">listener&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">conn&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">listener&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Accept&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Error accepting connection:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">continue&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">go&lt;/span> &lt;span class="nf">handleConnection&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">conn&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">handleConnection&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">conn&lt;/span> &lt;span class="nx">net&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Conn&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">defer&lt;/span> &lt;span class="nx">conn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">buffer&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nb">make&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="kt">byte&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1024&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">length&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">conn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Read&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">buffer&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Error reading:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">message&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nb">string&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">buffer&lt;/span>&lt;span class="p">[:&lt;/span>&lt;span class="nx">length&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Received message:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">message&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>編譯Client成&lt;code>WebAssembly&lt;/code>&lt;/p>
&lt;pre tabindex="0">&lt;code>GOOS=js GOARCH=wasm go build -o static/client.wasm client/client.go
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>要使用&lt;code>.wasm&lt;/code>還需要&lt;code>wasm_exec.js&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl"> cp &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>go env GOROOT&lt;span class="k">)&lt;/span>&lt;span class="s2">/misc/wasm/wasm_exec.js&amp;#34;&lt;/span> static
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>編寫 html&lt;/p>
&lt;p>html.index&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">script&lt;/span> &lt;span class="na">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;static/wasm_exec.js&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">go&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">Go&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">WebAssembly&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">instantiateStreaming&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fetch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;static/client.wasm&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nx">go&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">importObject&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">result&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">go&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">result&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">instance&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>看看結果&lt;/p>
&lt;p>啟動&lt;code>TCP&lt;/code> Server&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">cd&lt;/span> &lt;span class="nx">server&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">go&lt;/span> &lt;span class="nx">run&lt;/span> &lt;span class="nx">server&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">go&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用&lt;code>python3&lt;/code>的&lt;code>http.server&lt;/code>&lt;/p>
&lt;pre tabindex="0">&lt;code>python3 -m http.server 8000
&lt;/code>&lt;/pre>&lt;p>接著在瀏覽器上開啟&lt;code>http://localhost:8000&lt;/code>&lt;/p>
&lt;blockquote>
&lt;p>這時候 Client 會試圖跟 TCP Server 建立 websocket connection&lt;/p>
&lt;/blockquote>
&lt;br>
&lt;p>在&lt;code>TCP&lt;/code> Server的Terminal上可以看到&lt;code>Protocol upgrade mechanism&lt;/code>&lt;/p>
&lt;pre tabindex="0">&lt;code>Received message: GET /echo HTTP/1.1
Host: localhost:8080
Connection: Upgrade
Pragma: no-cache
Cache-Control: no-cache
User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36
Upgrade: websocket
Origin: http://0.0.0.0:8000
Sec-WebSocket-Version: 13
Accept-Encoding: gzip, deflate, br
Accept-Language: zh-TW,zh;q=0.9,en-US;q=0.8,en;q=0.7
Sec-WebSocket-Key: KJPuTDiTFeddEzYXqus2Bg==
Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
&lt;/code>&lt;/pre>&lt;/li>
&lt;/ol></content><category scheme="https://adrian-lin-1-0-0.github.io/tags/golang/" term="golang" label="golang"/><category scheme="https://adrian-lin-1-0-0.github.io/tags/webassembly/" term="webassembly" label="webassembly"/></entry><entry><title type="text">Wifi Sniffer</title><link rel="alternate" type="text/html" href="https://adrian-lin-1-0-0.github.io/2023/02/wifi-sniffer/"/><id>https://adrian-lin-1-0-0.github.io/2023/02/wifi-sniffer/</id><updated>2023-02-26T10:55:16+00:00</updated><published>2023-02-26T08:55:45+08:00</published><author><uri>https://adrian-lin-1-0-0.github.io/</uri></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en)</rights><summary type="html">關於咖啡廳的 wifi router 咖啡廳wifi router的常見的攻擊 - WiFi Sniffing
WiFi Sniffing:是指使用特殊的軟體工具來監聽傳輸在 Wi-Fi 網絡上的封包,包括帳號密碼這些敏感資訊.
要進行WiFi Sniffing,通常使用以下方法:
監聽 Wi-Fi 流量 假冒 Wi-Fi AP 我們將使用scapy
https://scapy.net/
Scapy is a powerful interactive packet manipulation program.
1 pip3 install scapy 監聽 Wi-Fi 流量 使用scapy監聽wlan0 interface上的流量, 如果是 tcp 就輸出摘要.</summary><content type="html">&lt;style>
.lntable{
max-height: 50em;
}
&lt;/style>
&lt;h2 id="關於咖啡廳的-wifi-router">關於咖啡廳的 wifi router&lt;/h2>
&lt;p>咖啡廳wifi router的常見的攻擊 - &lt;code>WiFi Sniffing&lt;/code>&lt;/p>
&lt;blockquote>
&lt;p>WiFi Sniffing:是指使用特殊的軟體工具來監聽傳輸在 Wi-Fi 網絡上的封包,包括帳號密碼這些敏感資訊.&lt;/p>
&lt;/blockquote>
&lt;p>要進行&lt;code>WiFi Sniffing&lt;/code>,通常使用以下方法:&lt;/p>
&lt;ul>
&lt;li>監聽 Wi-Fi 流量&lt;/li>
&lt;li>假冒 Wi-Fi AP&lt;/li>
&lt;/ul>
&lt;p>我們將使用&lt;code>scapy&lt;/code>&lt;br>
&lt;a href="https://scapy.net/">https://scapy.net/&lt;/a>&lt;/p>
&lt;blockquote>
&lt;p>Scapy is a powerful interactive packet manipulation program.&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">pip3&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">scapy&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="監聽-wi-fi-流量">監聽 Wi-Fi 流量&lt;/h2>
&lt;p>使用&lt;code>scapy&lt;/code>監聽&lt;code>wlan0&lt;/code> interface上的流量,
如果是 tcp 就輸出摘要.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">scapy.all&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="o">*&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">packet_handler&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pkt&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">pkt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">haslayer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">TCP&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pkt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">summary&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sniff&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">iface&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;wlan0&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">prn&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">packet_handler&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="假冒-wi-fi-ap">假冒 Wi-Fi AP&lt;/h2>
&lt;p>使用&lt;code>scapy.sendp&lt;/code>在無窮迴圈中broadcasts &lt;code>Beacon frame&lt;/code>&lt;/p>
&lt;blockquote>
&lt;p>Beacon frame : Beacon frame is one of the management frames in IEEE 802.11 based WLANs. It contains all the information about the network. Beacon frames are transmitted periodically, they serve to announce the presence of a wireless LAN and to synchronise the members of the service set. - &lt;a href="https://en.wikipedia.org/wiki/Beacon_frame">wikipedia&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">scapy.all&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="o">*&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">packet_handler&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pkt&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">pkt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">haslayer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">TCP&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pkt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">summary&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">start_fake_ap&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ap_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;Free WiFi&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ap_mac&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;00:11:22:33:44:55&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">beacon&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Dot11Beacon&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cap&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;ESS+privacy&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">essid&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Dot11Elt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;SSID&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">info&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">ap_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ap_name&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dsset&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Dot11Elt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;DSset&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">info&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="se">\x01&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">rsn&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Dot11Elt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;RSNinfo&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">info&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="se">\x01\x00&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span> &lt;span class="c1">#RSN Version 1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="se">\x00\x0f\xac\x02&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span> &lt;span class="c1">#Group Cipher Suite : 00-0f-ac TKIP&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="se">\x02\x00&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span> &lt;span class="c1">#2 Pairwise Cipher Suites (next two lines)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="se">\x00\x0f\xac\x04&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span> &lt;span class="c1">#AES Cipher&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="se">\x00\x0f\xac\x02&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span> &lt;span class="c1">#TKIP Cipher&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="se">\x01\x00&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span> &lt;span class="c1">#1 Authentication Key Managment Suite (line below)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="se">\x00\x0f\xac\x02&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span> &lt;span class="c1">#Pre-Shared Key&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">frame&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">RadioTap&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">beacon&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">essid&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">dsset&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rsn&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="kc">True&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sendp&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">frame&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">iface&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;wlan0&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sniff&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">iface&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;wlan0&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">prn&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">packet_handler&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">start_fake_ap&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></content><category scheme="https://adrian-lin-1-0-0.github.io/tags/python/" term="python" label="python"/><category scheme="https://adrian-lin-1-0-0.github.io/tags/wifi/" term="wifi" label="wifi"/></entry><entry><title type="text">Sync Obsidian with Github</title><link rel="alternate" type="text/html" href="https://adrian-lin-1-0-0.github.io/2023/02/snyc-obsidian-with-github/"/><id>https://adrian-lin-1-0-0.github.io/2023/02/snyc-obsidian-with-github/</id><updated>2023-02-26T10:55:16+00:00</updated><published>2023-02-25T21:14:28+08:00</published><author><uri>https://adrian-lin-1-0-0.github.io/</uri></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en)</rights><summary type="html">先備知識
github obsidian Linux and Mac OS X 安裝 git
Mac OS X (透過 Homebrew)
1 brew install git Linux (Debian/Ubuntu)
1 sudo apt-get install git Clone the repository
進入存放repository的folder
1 cd ~/repositories clone
1 git clone https://github.com/{your_username}/{your_repository} 在Obsidian開啟vault,並選則該repository
Android 安裝Termux
Google Play</summary><content type="html">&lt;p>先備知識&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://docs.github.com/en/get-started/quickstart/hello-world">github&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://obsidian.md/">obsidian&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="linux-and-mac-os-x">Linux and Mac OS X&lt;/h2>
&lt;p>&lt;img src="https://raw.githubusercontent.com/adrian-lin-1-0-0/blog-img/master/2023/02/25/obsidian-graph-view-linux.webp" alt="">&lt;/p>
&lt;ol>
&lt;li>
&lt;p>安裝 git&lt;/p>
&lt;p>Mac OS X (透過 Homebrew)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">brew install git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Linux (Debian/Ubuntu)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo apt-get install git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Clone the repository&lt;/p>
&lt;p>進入存放&lt;code>repository&lt;/code>的&lt;code>folder&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> ~/repositories
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>clone&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">git clone https://github.com/&lt;span class="o">{&lt;/span>your_username&lt;span class="o">}&lt;/span>/&lt;span class="o">{&lt;/span>your_repository&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>在&lt;code>Obsidian&lt;/code>開啟&lt;code>vault&lt;/code>,並選則該&lt;code>repository&lt;/code>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="android">Android&lt;/h2>
&lt;p>&lt;img src="https://raw.githubusercontent.com/adrian-lin-1-0-0/blog-img/master/2023/02/25/obsidian-graph-view.webp" alt="">&lt;/p>
&lt;ol>
&lt;li>
&lt;p>安裝Termux&lt;/p>
&lt;p>&lt;a href="https://play.google.com/store/apps/details?id=com.termux&amp;amp;hl=zh_TW&amp;amp;gl=US">Google Play&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>更新&lt;code>pkg&lt;/code>資料庫 &amp;amp;&amp;amp; 升級已安裝軟體&lt;/p>
&lt;pre tabindex="0">&lt;code>pkg update &amp;amp;&amp;amp; pkg upgrade -y
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>安裝&lt;code>git&lt;/code>的client端&lt;/p>
&lt;pre tabindex="0">&lt;code>pkg install git
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>給&lt;code>Termux&lt;/code>訪問儲存空間的權限&lt;/p>
&lt;pre tabindex="0">&lt;code>termux-setup-storage
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>進入&lt;code>shared&lt;/code>目錄&lt;/p>
&lt;pre tabindex="0">&lt;code>cd /storage/shared
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>創建&lt;code>Obsidian&lt;/code>使用的目錄並進入&lt;/p>
&lt;pre tabindex="0">&lt;code>mkdir obsidian
cd obsidian
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>Clone the repository&lt;/p>
&lt;p>因為在 &lt;code>android&lt;/code>手機上打字不那麼方便,我會將&lt;code>token&lt;/code>存在&lt;code>~/.git-credentials&lt;/code>.下次&lt;code>git pull&lt;/code>就不用再輸入一次.&lt;/p>
&lt;blockquote>
&lt;p>注意 : ~/.git-credentials 會以明文儲存,確保你沒有給你的 token 太大的權限&lt;/p>
&lt;/blockquote>
&lt;pre tabindex="0">&lt;code>git config --global credential.helper store
&lt;/code>&lt;/pre>&lt;p>git clone&lt;/p>
&lt;pre tabindex="0">&lt;code>git clone https://github.com/{your_username}/{your_repository}
&lt;/code>&lt;/pre>&lt;p>Push &amp;amp;&amp;amp; Pull&lt;/p>
&lt;p>因為已經儲存&lt;code>github token&lt;/code>了,&lt;code>pull&lt;/code>跟&lt;code>push&lt;/code>時不用再輸入一次&lt;code>username&lt;/code>跟&lt;code>password&lt;/code>&lt;/p>
&lt;pre tabindex="0">&lt;code>git pull
&lt;/code>&lt;/pre>&lt;p>Push&lt;/p>
&lt;pre tabindex="0">&lt;code>git push
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>在&lt;code>Obsidian&lt;/code>開啟&lt;code>vault&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/adrian-lin-1-0-0/blog-img/master/2023/02/25/open-folder-as-vault.webp" alt="">&lt;/p>
&lt;/li>
&lt;/ol></content><category scheme="https://adrian-lin-1-0-0.github.io/categories/note/" term="Note" label="Note"/><category scheme="https://adrian-lin-1-0-0.github.io/categories/obsidian/" term="Obsidian" label="Obsidian"/><category scheme="https://adrian-lin-1-0-0.github.io/categories/github/" term="Github" label="Github"/><category scheme="https://adrian-lin-1-0-0.github.io/tags/note/" term="note" label="note"/><category scheme="https://adrian-lin-1-0-0.github.io/tags/github/" term="github" label="github"/><category scheme="https://adrian-lin-1-0-0.github.io/tags/obsidian/" term="obsidian" label="obsidian"/></entry><entry><title type="text">Start blog with HUGO</title><link rel="alternate" type="text/html" href="https://adrian-lin-1-0-0.github.io/2022/07/start_blog_with_hugo/"/><id>https://adrian-lin-1-0-0.github.io/2022/07/start_blog_with_hugo/</id><updated>2023-02-26T10:55:16+00:00</updated><published>2022-07-27T22:17:25+08:00</published><author><uri>https://adrian-lin-1-0-0.github.io/</uri></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en)</rights><summary type="html">1. Download and Install HUGO Hugo currently provides pre-built binaries for the following:
macOS (Darwin) for x64, i386, and ARM architectures Windows Linux OpenBSD FreeBSD You can get the release distribution from HUGO&amp;rsquo;s github
or using command line :
Snap (Linux)</summary><content type="html">&lt;p>&lt;img src="https://raw.githubusercontent.com/adrian-lin-1-0-0/blog-img/master/2022/07/27/hugo-main-page.webp" alt="">&lt;/p>
&lt;h3 id="1-download-and-install-hugo">1. Download and Install HUGO&lt;/h3>
&lt;p>Hugo currently provides pre-built binaries for the following:&lt;/p>
&lt;ul>
&lt;li>macOS (Darwin) for x64, i386, and ARM architectures&lt;/li>
&lt;li>Windows&lt;/li>
&lt;li>Linux&lt;/li>
&lt;li>OpenBSD&lt;/li>
&lt;li>FreeBSD&lt;/li>
&lt;/ul>
&lt;p>You can get the release distribution from &lt;a href="https://github.com/gohugoio/hugo/releases">HUGO&amp;rsquo;s github&lt;/a>&lt;/p>
&lt;p>or using command line :&lt;/p>
&lt;p>Snap (Linux)&lt;/p>
&lt;blockquote>
&lt;p>The extended version with Sass/SCSS support&lt;/p>
&lt;/blockquote>
&lt;pre tabindex="0">&lt;code>$ snap install hugo --channel=extended
&lt;/code>&lt;/pre>&lt;blockquote>
&lt;p>The non-extended version without Sass/SCSS support&lt;/p>
&lt;/blockquote>
&lt;pre tabindex="0">&lt;code>$ snap install hugo
&lt;/code>&lt;/pre>&lt;p>Homebrew (macOS)&lt;/p>
&lt;pre tabindex="0">&lt;code>$ brew install hugo
&lt;/code>&lt;/pre>&lt;p>Chocokatey (Windows)&lt;/p>
&lt;pre tabindex="0">&lt;code>$ choco install hugo -confirm
&lt;/code>&lt;/pre>&lt;h3 id="2-create-a-new-site">2. Create a New Site&lt;/h3>
&lt;p>Create a HUGO template&lt;/p>
&lt;blockquote>
&lt;p>new : Create new content for your site&lt;/p>
&lt;/blockquote>
&lt;pre tabindex="0">&lt;code>$ hugo new site blog
&lt;/code>&lt;/pre>&lt;pre tabindex="0">&lt;code>$ tree blog
&lt;/code>&lt;/pre>&lt;p>You can see the project layout&lt;/p>
&lt;pre tabindex="0">&lt;code>blog
├── archetypes
│   └── default.md
├── config.toml
├── content
├── data
├── layouts
├── public
├── static
└── themes
&lt;/code>&lt;/pre>&lt;p>Try to add a theme&lt;/p>
&lt;blockquote>
&lt;p>you can find HUGO themes in &lt;a href="https://themes.gohugo.io/">&lt;code>themes.gohugo.io&lt;/code>&lt;/a>&lt;/p>
&lt;p>e.g. &lt;a href="https://themes.gohugo.io/themes/hugo-theme-meme/">&lt;code>hugo-theme-meme&lt;/code> &lt;/a>&lt;/p>
&lt;/blockquote>
&lt;pre tabindex="0">&lt;code>$ cd blog
/blog $ git init // if you didn&amp;#39;t initialize your repository
/blog $ git submodule add --depth 1 https://github.com/reuixiy/hugo-theme-meme.git themes/meme
&lt;/code>&lt;/pre>&lt;p>Replace &lt;code>config.toml&lt;/code>with &lt;code>hugo-theme-meme&lt;/code> config example&lt;/p>
&lt;pre tabindex="0">&lt;code>/blog $ rm config.toml &amp;amp;&amp;amp; cp themes/meme/config-examples/en/config.toml config.toml
&lt;/code>&lt;/pre>&lt;p>Create a new post and the about page&lt;/p>
&lt;pre tabindex="0">&lt;code>/blog $ hugo new &amp;#34;posts/hello-world.md&amp;#34;
/blog $ hugo new &amp;#34;about/_index.md&amp;#34;
&lt;/code>&lt;/pre>&lt;p>Run the hugo server&lt;/p>
&lt;blockquote>
&lt;p>-D, &amp;ndash;buildDrafts : include content marked as draft&lt;/p>
&lt;/blockquote>
&lt;pre tabindex="0">&lt;code>/blog $ hugo server -D
&lt;/code>&lt;/pre>&lt;p>Web Server is available at http://localhost:1313/&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/adrian-lin-1-0-0/blog-img/master/2022/07/27/hugo-theme-meme-hello.webp" alt="">&lt;/p>
&lt;p>Let&amp;rsquo;s type something in &lt;code>/blog/content/posts/hello.world&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/adrian-lin-1-0-0/blog-img/master/2022/07/27/hugo-hello-world-with-Hamlet.webp" alt="">&lt;/p>
&lt;p>After saving it, Hugo will rebuild the site&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/adrian-lin-1-0-0/blog-img/master/2022/07/27/hugo-hello-world-example.webp" alt="">&lt;/p></content><category scheme="https://adrian-lin-1-0-0.github.io/categories/golang/" term="Golang" label="Golang"/><category scheme="https://adrian-lin-1-0-0.github.io/categories/blog/" term="Blog" label="Blog"/><category scheme="https://adrian-lin-1-0-0.github.io/tags/golang/" term="golang" label="golang"/><category scheme="https://adrian-lin-1-0-0.github.io/tags/hugo/" term="hugo" label="hugo"/></entry></feed>